<ion-grid class="o-grid  u-nospace">
  <ion-row>
    <ion-col class="u-nospace">
      <ion-item class="c-search">
        <ion-input type="search" placeholder="Search..." id="term" name="term" (input)="search(searchBox.value)" #searchBox></ion-input>
        <ion-icon title="Search" name="search-outline" (click)="search(searchBox.value)"></ion-icon>
      </ion-item>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="9">
      <app-counter [counter]="allFavorites.length" [text]="{ plural:'favorites', single: 'favorite' }" *ngIf="allFavorites && allFavorites?.length > 0"></app-counter> 
    </ion-col>
    <ion-col size="2" class="ion-text-end">
      <ion-icon title="Categories" name="bookmark-outline" routerLink="/categories"></ion-icon>
    </ion-col>
    <ion-col size="1" class="ion-text-end">
      <ion-icon name="add-circle-outline" title="New favorite" routerLink="/favorites/new"></ion-icon>
    </ion-col> 
    <!--<ion-col size="1">
      <ion-icon name="ellipsis-vertical" title="Filtrar" (click)="openModal()"></ion-icon>
    </ion-col>-->
  </ion-row>
  <ion-row>
    <ion-col class="u-nospace">
      <span class="c-container  c-container--error" *ngIf="allFavorites?.length === 0">No favorites found.</span>
      <ion-list class="c-list" *ngIf="allFavorites">
        <ion-item-sliding *ngFor="let favorite of allFavorites">
          <ion-item-options side="start">
            <ion-item-option color="secondary" [title]="'Edit ' + favorite.title" [routerLink]="'/favorites/edit/' + favorite.slug" [queryParams]="{ id: favorite.id }">
              <ion-icon name="create-outline"></ion-icon>
            </ion-item-option>
          </ion-item-options>
          <ion-item lines="none" [title]="favorite.title" [href]="favorite.url" target="_blank">
            <ion-avatar slot="start" [title]="favorite.slug">
              <img [src]="'assets/logos/' + categories.get(favorite.category_id) + '.jpg'" [alt]="categories.get(favorite.category_id)" appImageFallback>
            </ion-avatar>
            <ion-label>
              <h2>{{ favorite.title }}</h2>
              <p>{{ favorite.description  | truncate: [64] }}</p>
            </ion-label>
            <ion-icon name="chevron-forward-outline"></ion-icon>
          </ion-item>
          <ion-item-options side="end">
            <ion-item-option color="danger" [title]="'Delete ' + favorite.title" (click)="favoriteDelete(favorite)">
              <ion-icon name="trash-outline"></ion-icon>
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>

      <ion-list *ngIf="!allFavorites">
        <ion-item *ngFor="let i of numItemsSkeleton | fill">
          <ion-avatar slot="start">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <h2>
              <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
            </h2>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-col>
  </ion-row>
</ion-grid>